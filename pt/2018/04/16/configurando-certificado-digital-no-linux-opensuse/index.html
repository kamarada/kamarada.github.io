<!DOCTYPE html>
<html lang="pt" prefix="
    addthis: http://www.addthis.com/help/api-spec
    og: http://ogp.me/ns#
    fb: http://ogp.me/ns/fb#
    article: http://ogp.me/ns/article#">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    
        <script type="text/javascript">
            if (("kamarada.github.io" == window.location.host) && (window.location.protocol != "https:")) {
                window.location = window.location.toString().replace(/^http:/, "https:");
            }
        </script>
    

    <title>
        
            
                Configurando certificado digital no Linux openSUSE - Linux Kamarada
            
        
    </title>
    <meta name="author" content="Antônio Vinícius">
    <meta name="description" content="Um certificado digital permite identificar e autenticar pessoas físicas, empresas ou computadores em sites e sistemas. Ele garante princípios da segurança da...">
    <link rel="canonical" href="https://kamarada.github.io/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/">
    <link rel="alternate" type="application/rss+xml" title="Linux Kamarada" href="https://kamarada.github.io/pt/feed.xml" />

    
        
    
    
        
    

    <!-- OpenSearch -->
    <link rel="search" type="application/opensearchdescription+xml" title="Pesquisar Linux Kamarada" href="https://kamarada.github.io/pt/opensearch.xml" />

    <!-- Open Graph -->
    
        <meta property="article:published_time" content="2018-04-16 00:30:00 -0300"/>
    
    
    
        <meta property="fb:page_id" content="1700979763454346" />
    
    
        <meta property="og:author" content="Antônio Vinícius" />
    
    <meta property="og:description" content="Um certificado digital permite identificar e autenticar pessoas físicas, empresas ou computadores em sites e sistemas. Ele garante princípios da segurança da..." />
    
        <meta property="og:image" content="https://kamarada.github.io/files/2018/04/etoken.jpg" />
    
    <meta property="og:site_name" content="Linux Kamarada" />
    <meta property="og:title" content="Configurando certificado digital no Linux openSUSE" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://kamarada.github.io/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/" />

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary" />
    
        <meta name="twitter:site" content="@LinuxKamarada" />
    

    <!-- Favicons (made with RealFaviconGenerator.net) -->
    <link rel="apple-touch-icon" sizes="180x180" href="https://kamarada.github.io/apple-touch-icon.png?v=2">
    <link rel="icon" type="image/png" sizes="32x32" href="https://kamarada.github.io/favicon-32x32.png?v=2">
    <link rel="icon" type="image/png" sizes="16x16" href="https://kamarada.github.io/favicon-16x16.png?v=2">
    <link rel="manifest" href="https://kamarada.github.io/manifest.json?v=2">
    <link rel="shortcut icon" href="https://kamarada.github.io/favicon.ico?v=2">
    <meta name="theme-color" content="#4caf50">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/css/bootstrap-material-design.min.css">-->
    <link rel="stylesheet" href="/libs/bootstrap-material-design/0.5.10/custom/bootstrap-material-design.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/css/ripples.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <link rel="stylesheet" href="/assets/css/main.css">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/js/material.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.10/js/ripples.min.js"></script>
    <script src="/assets/js/main.js"></script>

    
        <!-- Google Analytics -->
        <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-65333685-3', 'auto');
        ga('send', 'pageview', {
            'page': 'https://kamarada.github.io/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/',
            'title': 'Configurando certificado digital no Linux openSUSE'
        });

        </script>
        <!-- End Google Analytics -->
    

    
        <!-- Google AdSense -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    

    
        <!-- AddThis -->
        <script async src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-563f92aa117815bd"></script>
        <script type="text/javascript">
            var addthis_config = {
                data_track_clickback: true,
                data_track_addressbar: true,
                
                    ui_language: 'pt'
                
            };
            var addthis_share = {
                url: 'https://kamarada.github.io/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/',
                title: document.title,
                description: 'Um certificado digital permite identificar e autenticar pessoas físicas, empresas ou computadores em sites e sistemas. Ele garante princípios da segurança da...'
            };
        </script>
        <!-- End AddThis -->
    
</head>


<body itemscope itemtype="http://schema.org/BlogPosting">

    <nav class="navbar navbar-default navbar-fixed-top navbar-with-search" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed pull-left" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                
                    Linux Kamarada
                
            </a>
        </div><!--.navbar-header-->

        <form class="navbar-form">
            <div class="dropdown pull-left">
                <a class="dropdown-toggle" id="language-button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" title="Traduções"><span class="glyphicon glyphicon-globe" aria-hidden="true"></span></a>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="language-button">
                    
                        
                    
                    
                        <li class="dropdown-header">English</li>
                        
                        
                            <li>
                                <a href="http://translate.google.com/translate?js=n&sl=pt&tl=en&u=https://kamarada.github.io/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/">This page in English</a>
                            </li>
                        
                        <li><a href="https://kamarada.github.io/en/">English home page</a></li>
                        <li role="separator" class="divider"></li>
                    
                        <li class="dropdown-header">Português</li>
                        
                        
                            <li>
                                <a class="translation-pt" href="https://kamarada.github.io/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/">Esta página em Português</a>
                            </li>
                        
                        <li><a href="https://kamarada.github.io/pt/">Página inicial em Português</a></li>
                        <li role="separator" class="divider"></li>
                    
                    <li class="dropdown-header">Other languages (by Google Translate)</li>
                    <li><a href="http://translate.google.com/translate?js=n&sl=pt&u=https://kamarada.github.io/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/">Translate this page</a></li>
                </ul>
            </div><!--.dropdown-->
            <a class="pull-left" id="search-button" title="Pesquisar"><span class="glyphicon glyphicon-search" aria-hidden="true"></span></a>
        </form><!--.navbar-form-->

        <div class="collapse navbar-collapse" id="navbar">
            <ul class="nav navbar-nav navbar-right">
                
                    
                

                
                    
                        <li><a href="/pt/download/leap/42.2/">Download</a></li>
                    
                
            </ul>
        </div><!--#navbar-->
    </div><!--.container-->

    <div id="search-bar">
        <div class="container">
            <form action="/pt/buscar/" id="search-form" method="get" role="search">
                
                
                <div class="input-group">
                    <input class="form-control" id="search-input" type="text" name="q" placeholder="Pesquisar">
                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary" id="submit-search-button"><span class="glyphicon glyphicon-search"></span></button>
                        <button type="reset" class="btn btn-danger" id="reset-search-button"><span class="glyphicon glyphicon-remove"></span></button>
                    </span>
                </div>
            </form>
        </div>
    </div><!--#search-bar-->
</nav>


    <div class="container">
        <div class="row">
            <div class='col-sm-8'>
                <!--<div class='gap-small'>
                    <a class='gap-small' href='http://en.opensuse.org/Portal:42.2'>
                        <img class='img-responsive' id='countdown' src='http://countdown.opensuse.org/wide.png'/>
                    </a>
                </div>-->
                <div class="blog-post panel panel-default">
    <header class="panel-heading">
        <h1 class="blog-post-title" itemprop="headline name">
            <a class="blog-post-link" href="/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/" itemprop="mainEntityOfPage url">
                Configurando certificado digital no Linux openSUSE
            </a>
        </h1>
        <div class="blog-post-meta row">
            <div class='col-sm-6'>
                <p class="blog-post-date" itemprop="datePublished" content="2018-04-16">
                    <a href="/2018/04/16/">
                        
    16 de
    
    Abril
        
    de 2018


                    </a>
                </p>
                <meta itemprop="dateModified" content="2018-04-16" />
            </div>
            <div class='col-sm-6'>
                
                    <div class='blog-post-share'>
                        <!-- AddThis Sharing Buttons -->
                        <div class="addthis_toolbox addthis_default_style">
                            <a class="addthis_button_facebook"></a>
                            <a class="addthis_button_twitter" data-via="LinuxKamaradaWW"></a>
                            <a class="addthis_button_google_plusone_share"></a>
                            <a class="addthis_button_favorites"></a>
                            <a class="addthis_button_compact"></a>
                            <a class="addthis_counter addthis_bubble_style"></a>
                        </div>
                        <!-- AddThis Sharing Buttons End -->
                    </div><!-- .blog-post-share -->
                
            </div><!-- .col-sm-6 -->
        </div><!-- .blog-post-meta -->
    </header>

    <article class="blog-post-content panel-body">
        
            <!-- Google AdSense -->
<div class="row">
    <div class="col-xs-12">
        <ins class="adsbygoogle" id="content_ad_unit_1"
            data-ad-client="ca-pub-5193467168351289"
            data-ad-format="auto"
            data-ad-slot="8945658251"></ins>
    </div><!-- .col-xs-12 -->
</div><!-- .row -->
<!-- End Google AdSense -->

        

        <div class="row" itemprop="articleBody mainEntity">
            <div class="col-xs-12">
                <p>Um <a href="https://pt.wikipedia.org/wiki/Certificado_digital">certificado digital</a> permite <strong>identificar</strong> e <strong>autenticar</strong> pessoas físicas, empresas ou computadores em <em>sites</em> e sistemas. Ele garante princípios da <a href="https://pt.wikipedia.org/wiki/Seguran%C3%A7a_da_informa%C3%A7%C3%A3o">segurança da informação</a> às operações realizadas por meio dele, como <strong>autenticidade</strong> e <strong>não repúdio</strong>, atribuindo-lhes validade jurídica e dispensando o reconhecimento de firma.</p>

<p>Existem basicamente 2 tipos de certificado digital:</p>

<ul>
<li>o <strong>Certificado A1</strong>, que é armazenado no computador (ou dispositivo móvel, como <em>smartphone</em> ou <em>tablet</em>) e tem validade de 1 ano; e</li>
<li>o <strong>Certificado A3</strong>, que é armazenado em uma mídia criptográfica (<a href="https://pt.wikipedia.org/wiki/Cart%C3%A3o_inteligente">cartão inteligente</a> ou <a href="https://pt.wikipedia.org/wiki/Token_(chave_eletr%C3%B4nica)">token</a>) e tem validade de 1 a 3 anos.</li>
</ul>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/etoken.jpg' title='Um *token* parece um *pendrive*, mas é uma mídia criptográfica, serve apenas para armazenar um certificado digital'>
<img src='/files/2018/04/etoken.jpg' alt='Um *token* parece um *pendrive*, mas é uma mídia criptográfica, serve apenas para armazenar um certificado digital' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

<em class='caption' itemprop='description'>
<p>Um <em>token</em> parece um <em>pendrive</em>, mas é uma mídia criptográfica, serve apenas para armazenar um certificado digital</p>

</em>

</div>

<p>Algumas utilidades do certificado digital para pessoas físicas e jurídicas são:</p>

<ul>
<li>Assinar e enviar documentos com validade jurídica pela Internet;</li>
<li>Assinar <a href="http://www.nfe.fazenda.gov.br/">Nota Fiscal eletrônica (NF-e)</a>;</li>
<li>Entrar em ambientes seguros;</li>
<li>Acessar sistemas seguros do governo que possibilitam atendimentos antes possíveis apenas presencialmente, como o <a href="https://cav.receita.fazenda.gov.br/">eCAC</a> da <a href="http://idg.receita.fazenda.gov.br/">Receita Federal</a>;</li>
<li>Enviar declarações de imposto de renda, seja de pessoa física ou jurídica; e</li>
<li>Realizar transações bancárias com mais segurança.</li>
</ul>

<p>Para uma lista completa de tipos de certificados digitais e suas possíveis utilizações para pessoas físicas e jurídicas, consulte <a href="https://www.certisign.com.br/certificado-digital/indicacao-uso">esta página</a>.</p>

<p>Há também os certificados digitais que identificam <em>sites</em>. Quando você acessa um <em>site</em> que apresenta um certificado digital, o navegador exibe o ícone de um cadeado verde, indicando que o <em>site</em> é autêntico e seguro. Já falamos um pouco sobre certificados de <em>sites</em> em <a href="/pt/2017/08/29/como-instalar-certificados-de-seguranca-no-linux/">outro <em>post</em></a>.</p>

<p>Neste <em>post</em>, você verá como utilizar um <em>token</em> para acessar um sistema do governo com certificado digital no <a href="https://www.opensuse.org/">Linux openSUSE</a>.</p>

<p>Na demonstração, vou utilizar um <em>token</em> USB igual ao da imagem, modelo <a href="https://safenet.gemalto.com/multi-factor-authentication/authenticators/pki-usb-authentication/">eToken PRO</a>, da fabricante <a href="https://safenet.gemalto.com/">SafeNet</a> (antiga <a href="https://pt.wikipedia.org/wiki/Aladdin_Knowledge_Systems">Aladdin</a>).</p>

<h2>Instalando os pacotes necessários</h2>

<p>No Linux, a utilização de mídias criptográficas é gerenciada principalmente pelos <em>softwares</em> <a href="https://pcsclite.apdu.fr/">PC/SC</a> e <a href="https://github.com/OpenSC/OpenSC/wiki">OpenSC</a>.</p>

<p>Para instalá-los no openSUSE, execute o seguinte comando (observe a notação para executá-lo como usuário <em>root</em>):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># zypper in opensc pcsc-ccid pcsc-lite pcsc-tools
</code></pre></div>
<p>Inicie o serviço do PC/SC, que disponibiliza as mídias criptográficas para os aplicativos, e habilite-o para que seja iniciado automaticamente junto com o sistema:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># systemctl start pcscd
# systemctl enable pcscd
</code></pre></div>
<p>Você pode verificar que o serviço está funcionando com:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># systemctl status pcscd
● pcscd.service - PC/SC Smart Card Daemon
   Loaded: loaded (/usr/lib/systemd/system/pcscd.service; indirect; vendor preset: disabled)
   Active: active (running) since Sun 2018-04-15 17:43:24 -03; 10s ago
 Main PID: 10394 (pcscd)
    Tasks: 3 (limit: 4915)
   CGroup: /system.slice/pcscd.service
           └─10394 /usr/sbin/pcscd --foreground

Apr 15 17:43:24 localhost.localdomain systemd[1]: Started PC/SC Smart Card Daemon.
</code></pre></div>
<p>Conecte o <em>token</em> e verifique que ele é reconhecido como um dispositivo USB (note que você pode executar o comando a seguir como usuário <em>root</em> ou comum):</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ lsusb
Bus 001 Device 002: ID 8087:8001 Intel Corp. 
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 003 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 002 Device 005: ID 0bda:0129 Realtek Semiconductor Corp. RTS5129 Card Reader Controller
Bus 002 Device 004: ID 1bcf:2c81 Sunplus Innovation Technology Inc. 
Bus 002 Device 002: ID 13fe:4200 Kingston Technology Company Inc. 
Bus 002 Device 006: ID 045e:0745 Microsoft Corp. Nano Transceiver v1.0 for Bluetooth
Bus 002 Device 007: ID 0529:0620 Aladdin Knowledge Systems Token JC
Bus 002 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
</code></pre></div>
<p>Observe o <em>token</em> listado na penúltima linha.</p>

<p>Verifique que o PC/SC reconhece o <em>token</em> com o comando:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ pcsc_scan
PC/SC device scanner
V 1.5.2 (c) 2001-2017, Ludovic Rousseau &lt;ludovic.rousseau@free.fr&gt;
Using reader plug&#39;n play mechanism
Scanning present readers...
0: SafeNet eToken 5100 [Main Interface] 00 00

Sun Apr 15 17:45:37 2018
 Reader 0: SafeNet eToken 5100 [Main Interface] 00 00
  Card state: Card inserted, 
  ATR: 3B D5 18 00 81 31 FE 7D 80 73 C8 21 10 F4

ATR: 3B D5 18 00 81 31 FE 7D 80 73 C8 21 10 F4
+ TS = 3B --&gt; Direct Convention
+ T0 = D5, Y(1): 1101, K: 5 (historical bytes)
  TA(1) = 18 --&gt; Fi=372, Di=12, 31 cycles/ETU
    129032 bits/s at 4 MHz, fMax for Fi = 5 MHz =&gt; 161290 bits/s
  TC(1) = 00 --&gt; Extra guard time: 0
  TD(1) = 81 --&gt; Y(i+1) = 1000, Protocol T = 1 
-----
  TD(2) = 31 --&gt; Y(i+1) = 0011, Protocol T = 1 
-----
  TA(3) = FE --&gt; IFSC: 254
  TB(3) = 7D --&gt; Block Waiting Integer: 7 - Character Waiting Integer: 13
+ Historical bytes: 80 73 C8 21 10
  Category indicator byte: 80 (compact TLV data object)
    Tag: 7, len: 3 (card capabilities)
      Selection methods: C8
        - DF selection by full DF name
        - DF selection by partial DF name
        - Implicit DF selection
      Data coding byte: 21
        - Behaviour of write functions: proprietary
        - Value &#39;FF&#39; for the first byte of BER-TLV tag fields: invalid
        - Data unit in quartets: 2
      Command chaining, length fields and logical channels: 10
        - Logical channel number assignment: by the card
        - Maximum number of logical channels: 1
+ TCK = F4 (correct checksum)

Possibly identified card (using /usr/share/pcsc/smartcard_list.txt):
3B D5 18 00 81 31 FE 7D 80 73 C8 21 10 F4
    Bank of Lithuania Identification card
    Gemalto SafeNet eToken Java Based Cards
    https://safenet.gemalto.com/multi-factor-authentication/authenticators/pki-usb-authentication/
</code></pre></div>
<p>Observe que esse comando não para, você deve teclar <strong>Ctrl + C</strong> para interrompê-lo.</p>

<p>O OpenSC pode ser testado com o comando:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ opensc-tool -l
# Detected readers (pcsc)
Nr.  Card  Features  Name
0    Yes             SafeNet eToken 5100 [Main Interface] 00 00
</code></pre></div>
<h3>Especificidades do token Aladdin/SafeNet</h3>

<p>Observe que ambos os <em>softwares</em> reconhecem o <em>token</em>, mas o atribuem um modelo errado: <code>SafeNet eToken 5100</code>, que é <a href="https://safenet.gemalto.com/multi-factor-authentication/authenticators/pki-usb-authentication/etoken-5110-usb-token/">outro <em>token</em></a> da mesma fabricante.</p>

<p>A consequência disso é que não é possível, a priori, utilizar o <em>token</em>. Os comandos a seguir que deveriam retornar mais informações sobre o <em>token</em> resultam em erro:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ opensc-tool -r 0 -f
SELECT FILE failed: Incorrect parameters in APDU

$ pkcs15-tool --reader 0 --list-pins
Failed to connect to card: Card is invalid or cannot be handled
</code></pre></div>
<p>Vários <em>tokens</em> já são reconhecidos e funcionam bem com a dupla PC/SC e OpenSC, mas no caso específico do Aladdin/SafeNet eToken PRO é necessário instalar também um <em>software</em> proprietário da SafeNet, que é o <a href="https://safenet.gemalto.com/etoken-pki-client/">SafeNet Authentication Client</a>.</p>

<p>O ideal é que você obtenha esse <em>software</em> da certificadora onde você adquiriu o <em>token</em>, mas você pode obtê-lo do <em>site</em> da <a href="https://www.soluti.com.br/">Soluti</a>, que é uma das certificadoras que suportam a utilização de Linux.</p>

<p>Acesse o <a href="https://www.soluti.com.br/"><em>site</em> da Soluti</a> e clique, na sequência, em:</p>

<ul>
<li><strong>Dúvidas e suporte</strong></li>
<li><strong>Token</strong></li>
<li><strong>SafeNet</strong></li>
<li><strong>Linux</strong></li>
</ul>

<p>Por fim, clique no <em>link</em> <strong>SafeNet Authentication Client 9.1 para distribuições Red Hat/Fedora de 32 ou 64 bits</strong> (o primeiro da lista):</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-01-pt.jpg' title=''>
<img src='/files/2018/04/token-01-pt.jpg' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Salve o arquivo.</p>

<p>Ele é criado com o nome <code>safenet_rpm_9.1.7-0.tar.gz</code> na pasta <code>Downloads</code>.</p>

<p>Abra essa pasta, clique com o botão direito do <em>mouse</em> no arquivo baixado e clique em <strong>Extrair aqui</strong>:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-02-pt.jpg' title=''>
<img src='/files/2018/04/token-02-pt.jpg' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>É criada a pasta <code>safenet_rpm_9.1.7-0</code> com o conteúdo extraído do arquivo.</p>

<p>Clique com o botão direito nessa pasta e depois clique em <strong>Abrir no terminal</strong>:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-03-pt.jpg' title=''>
<img src='/files/2018/04/token-03-pt.jpg' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Alterne para o usuário <em>root</em>, para realizar a instalação:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ su
</code></pre></div>
<p>Instale os requisitos do SafeNet Authentication Client:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># zypper in libcrypto43 openssl
# ln -s /usr/lib64/libcrypto.so.1.1 /usr/lib64/libcrypto.so.6
</code></pre></div>
<p>E, por fim, instale o SafeNet Authentication Client em si:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># ./install.sh 
################################# [100%]
Updating / installing...
################################# [100%]
could not find mozilla directory
Enable pcscd service
Enable SACSrv service
SafeNet Authentication Client installation completed.
Installing Language code pt-BR.
logout and login to apply changes
</code></pre></div>
<p>Reinicie o computador (fazer <em>logout</em> e <em>login</em> como sugere o <em>script</em> de instalação não funcionou ao menos para mim).</p>

<p>Quando voltar, inicie o <strong>SafeNet Authentication Client Tools</strong> (o primeiro ícone):</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-04-pt.jpg' title=''>
<img src='/files/2018/04/token-04-pt.jpg' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Observe que ele reconhece o <em>token</em> devidamente:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-05-pt.jpg' title=''>
<img src='/files/2018/04/token-05-pt.jpg' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<h2>Configurando o token no Firefox</h2>

<p>Para poder utilizar o <em>token</em> no navegador <a href="https://www.mozilla.org/pt-BR/firefox/">Mozilla Firefox</a>, vamos cadastrá-lo como um dispositivo de segurança.</p>

<p>Para isso, com o Firefox aberto, abra o <strong>menu do Firefox</strong> e clique em <strong>Preferências</strong>.</p>

<p>Depois, clique em <strong>Privacidade e Segurança</strong> e, por último, no botão <strong>Dispositivos de Segurança</strong>, no final:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-06-pt.png' title=''>
<img src='/files/2018/04/token-06-pt.png' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Em <strong>Nome do módulo</strong>, digite um nome que identifique o <em>token</em> (por exemplo, <code>eToken</code>).</p>

<p>Em <strong>Nome do arquivo do módulo</strong>, informe o caminho para a biblioteca do <em>token</em>:</p>

<ul>
<li>se seu <em>token</em> foi reconhecido pelo OpenSC, informe <code>/usr/lib64/opensc-pkcs11.so</code>;</li>
<li>se você instalou o SafeNet Authentication Client (meu caso), informe <code>/usr/lib64/libeToken.so</code>;</li>
<li>para outros <em>tokens</em>, siga as instruções fornecidas pela fabricante ou certificadora.</li>
</ul>

<p>Quando terminar, clique em <strong>OK</strong>:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-07-pt.png' title=''>
<img src='/files/2018/04/token-07-pt.png' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Observe que o <em>token</em> é adicionado à lista de <strong>Dispositivos e módulos de segurança</strong>, clique em <strong>OK</strong>:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-08-pt.png' title=''>
<img src='/files/2018/04/token-08-pt.png' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<h2>Acessando o sistema eCAC</h2>

<p>O <a href="https://cav.receita.fazenda.gov.br/">eCAC</a> é um sistema da <a href="http://idg.receita.fazenda.gov.br/">Receita Federal</a> que disponibiliza pela Internet <a href="http://www.receita.fazenda.gov.br/aplicacoes/ATBHE/servicos-ecac/default.aspx">vários serviços</a> para pessoas físicas e jurídicas, antes disponíveis apenas presencialmente. É possível acessá-lo por meio de um código de acesso gerado na hora, mas menos serviços estão disponíveis por esse meio, que é menos seguro. A totalidade dos serviços está disponível apenas para quem o acessa com certificado digital.</p>

<p>Alguns dos serviços mais úteis para pessoas físicas incluem consultar declarações e recibos já enviados do imposto de renda e <a href="http://g1.globo.com/economia/imposto-de-renda/2016/noticia/2016/05/contribuinte-ja-pode-saber-se-caiu-na-malha-fina-do-imposto-de-renda-2016.html">verificar se a declaração caiu na malha fina</a>, assim como <a href="http://economia.estadao.com.br/blogs/regina-pitoscia/sua-declaracao-ficou-em-malha-fina-acerte-logo-a-situacao/">tomar ações para regularizar a situação</a>.</p>

<p><strong>Observação:</strong> o eCAC é um sistema do governo assinado com um certificado de segurança próprio. Para acessá-lo, você deve instalar o certificado da Autoridade Certificadora Raiz Brasileira. Se ainda não fez isso, veja como fazer <a href="/pt/2017/08/29/como-instalar-certificados-de-seguranca-no-linux/">nesse <em>post</em></a>.</p>

<p>Para acessar o eCAC, certifique-se de que o <em>token</em> está conectado ao computador.</p>

<p>Depois, clique no <em>link</em>:</p>

<p><a href="https://cav.receita.fazenda.gov.br/">https://cav.receita.fazenda.gov.br/</a></p>

<p>Na tela de <em>login</em>, clique em <strong>Certificado Digital</strong>:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-09-pt.png' title=''>
<img src='/files/2018/04/token-09-pt.png' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Digite a senha PIN do <em>token</em> e clique em <strong>OK</strong>:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-10-pt.png' title=''>
<img src='/files/2018/04/token-10-pt.png' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Confirme as informações do certificado a ser utilizado e clique em <strong>OK</strong>:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-11-pt.jpg' title=''>
<img src='/files/2018/04/token-11-pt.jpg' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Verifique suas informações na parte superior da tela:</p>

<div class='image no-ads-here text-center' itemscope itemtype='http://schema.org/ImageObject'>
<a href='/files/2018/04/token-12-pt.png' title=''>
<img src='/files/2018/04/token-12-pt.png' alt='' class='img-responsive img-thumbnail' itemprop='contentUrl'>
</a>

</div>

<p>Pronto! Agora você está no ambiente seguro da Receita Federal e sabe que configurou corretamente seu certificado digital no Linux openSUSE!</p>

<p>Divirta-se bastante... (<em>have a lot of fun...</em>)</p>

<h2>Referências</h2>

<ul>
<li><a href="https://www.certisign.com.br/certificado-digital">Certificado Digital | Certisign</a></li>
<li><a href="https://serasa.certificadodigital.com.br/o-que-e/">O que é Certificado Digital? | Serasa Experian</a></li>
<li><a href="http://idg.receita.fazenda.gov.br/orientacao/tributaria/senhas-e-procuracoes/senhas/certificados-digitais">Certificados Digitais — Receita Federal</a></li>
<li><a href="https://diadialinux.wordpress.com/2017/03/02/instalar-etoken-alladin-usar-sites-do-governo-com-certificado-digital-e-assinar-documentos-pdf/">Instalar eToken Alladin, usar sites do governo com certificado Digital e assinar documentos PDF — Dicas do cotidiano com linux</a></li>
<li><a href="https://www.mayrhofer.eu.org/aladdin-etoken-under-linux">Howto use Aladdin eToken under Linux | Rene Mayrhofer&#39;s virtual home</a></li>
<li><a href="https://www.suse.com/c/configuring-smart-card-authentication-suse-linux-enterprise/">Configuring Smart Card authentication on SUSE Linux Enterprise - SUSE Communities</a></li>
<li><a href="https://github.com/OpenSC/OpenSC/wiki/Aladdin-eToken-PRO">Aladdin eToken PRO · OpenSC/OpenSC Wiki · GitHub</a></li>
<li><a href="https://github.com/OpenSC/OpenSC/issues/461">Unsuported Aladdin eToken PRO USB 72k Java · Issue #461 · OpenSC/OpenSC · GitHub</a></li>
<li><a href="https://github.com/OpenSC/OpenSC/wiki/Installing-OpenSC-PKCS%2311-Module-in-Firefox,-Step-by-Step">Installing OpenSC PKCS#11 Module in Firefox, Step by Step · OpenSC/OpenSC Wiki · GitHub</a></li>
</ul>

            </div>
        </div>

        
            <!-- AddThis Sharing Buttons -->
            <div class="gap"></div>
            <h2>
                
                    Gostou? Que tal compartilhar?
                
            </h2>
            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                <a class="addthis_button_facebook"></a>
                <a class="addthis_button_twitter"></a>
                <a class="addthis_button_google_plusone_share"></a>
                <a class="addthis_button_email"></a>
                <a class="addthis_button_favorites"></a>
                <a class="addthis addthis_button_print"></a>
                <a class="addthis_button_pdfonline"></a>
                <a class="addthis_button_compact"></a>
                <a class="addthis_counter addthis_bubble_style"></a>
            </div>
            <!-- AddThis Sharing Buttons End -->
        

        
            <!-- Disqus -->
            <div class="gap"></div>
            <h2>
                
                    Comentários
                
            </h2>
            <div class="row">
                <div class="col-xs-12">
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        /* * * CONFIGURATION VARIABLES * * */
                        
                            var disqus_config = function () {
                                this.language = "pt";
                            };
                        
                        var disqus_shortname = 'kamarada';
                        var disqus_url = 'https://kamarada.github.io/pt/2018/04/16/configurando-certificado-digital-no-linux-opensuse/';

                        /* * * DON'T EDIT BELOW THIS LINE * * */
                        (function() {
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                    <noscript>
                        <p>Please <a href="http://www.enable-javascript.com/" target="_blank">enable JavaScript</a> to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus</a>.</p>
                    </noscript>
                </div><!-- .col-xs-12 -->
            </div><!-- .row -->
            <!-- Disqus End -->
        
    </article>
</div><!-- .blog-post -->

            </div>
            <div class="col-sm-4">
                <div class="panel panel-default" id="about">
    <div class="panel-heading">
        <h3>
            <a name="about"></a>
            
                Sobre
            
        </h3>
    </div>
    <div class="panel-body" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
        <meta itemprop="name" content="Linux Kamarada" />
        <meta itemprop="url" content="https://kamarada.github.io" />
        <p class='text-center' itemprop='logo' itemscope itemtype='http://schema.org/ImageObject'>
            <a href='https://kamarada.github.io/assets/img/TuxKamarada.png' itemprop='url'>
                <img src='https://kamarada.github.io/assets/img/TuxKamarada.png' class='img-responsive img-thumbnail'>
            </a>
            <!--<meta itemprop="width" content=""/>--><!-- TODO Image width -->
            <!--<meta itemprop="height" content=""/>--><!-- TODO Image height -->
        </p>
        <p class="text" itemprop="description">
            
                O Projeto Linux Kamarada é um projeto novo que visa divulgar e promover o Linux como um sistema operacional robusto, seguro, versátil e fácil de usar, adequado para o uso diário seja em casa, no trabalho ou no servidor. Os focos do projeto são principalmente distribuição e documentação.

            
        </p>
        
            <!-- AddThis Follow Buttons -->
            <div class="addthis_toolbox addthis_32x32_style addthis_default_style center-block">
                
                    <a href="https://facebook.com/LinuxKamarada" class="addthis_button_facebook_follow" addthis:userid="LinuxKamarada" itemprop="sameAs"></a>
                
                
                    <a href="https://twitter.com/LinuxKamarada" class="addthis_button_twitter_follow" addthis:userid="LinuxKamarada" itemprop="sameAs"></a>
                
                
                
                
                
                
                    <a href="https://github.com/kamarada" class="addthis_button_github_follow" addthis:userid="kamarada" itemprop="sameAs"></a>
                
                <a href="https://kamarada.github.io/pt/feed.xml" class="addthis_button_rss_follow"></a>
            </div>
            <!-- AddThis Follow Buttons End -->
        
    </div><!-- .panel-body -->
</div><!-- .panel -->

<div class="panel panel-default">
    <div class="panel-heading">
        <h3>
            <a name="author"></a>
            
                Autor
            
        </h3>
    </div>
    <div class="panel-body">
        <div itemprop="author" itemscope itemtype="http://schema.org/Person">
            
                <p class="text-center">
                    <a href="https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b" title="Antônio Vinícius">
                        <img src="https://secure.gravatar.com/avatar/5415f4267b44aa9f51b6f89ac4d1656b" alt="Antônio Vinícius" class="img-circle img-responsive img-thumbnail">
                    </a>
                </p>
            
            
                <p class="lead text-center" itemprop="name">
                    
                        Antônio Vinícius
                    
                </p>
            
            <ul class="contact-list list-unstyled">
                
                    <li><a href="http://www.vinyanalista.com.br" itemprop="url"><i class="fa fa-globe"></i> http://www.vinyanalista.com.br</a></li>
                
            </ul>
        </div>
    </div><!-- .panel-body -->
</div><!-- .panel -->


    <div class="panel panel-default">
        <div class="panel-body">
            <!-- Google AdSense -->
<div class="row">
    <div class="col-xs-12">
        <ins class="adsbygoogle" id="sidebar_ad_unit"
            data-ad-client="ca-pub-5193467168351289"
            data-ad-format="auto"
            data-ad-slot="7329324255"></ins>
    </div><!-- .col-xs-12 -->
</div><!-- .row -->
<!-- End Google AdSense -->

        </div><!-- .col-xs-12 -->
    </div><!-- .row -->


            </div>
        </div>
    </div>

    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <p class="text-center">
                    Copyright &copy; 2018 <a href='#author'>Antônio Vinícius</a>. Todos os direitos reservados. Baseado no <a href='https://github.com/vinyanalista/material-jekyll-plus'>Material site template for Jekyll PLUS</a>.
                </p>
            </div>
        </div>
    </div>
</footer>

<meta itemprop="description" content="Um certificado digital permite identificar e autenticar pessoas físicas, empresas ou computadores em sites e sistemas. Ele garante princípios da segurança da informação às operações realizadas por meio dele, como autenticidade e não repúdio, atribuindo-lhes validade jurídica e dispensando o reconhecimento de firma.">


    <div itemprop="image" itemscope itemtype="http://schema.org/ImageObject">
        <meta itemprop="url" content="https://kamarada.github.io/files/2018/04/etoken.jpg"/>
        <!--<meta itemprop="width" content=""/>--><!-- TODO Image width -->
        <!--<meta itemprop="height" content=""/>--><!-- TODO Image height -->
    </div> 



    <meta itemprop="inLanguage" content="pt"/>



    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES * * */
        
            var disqus_config = function () {
                this.language = "pt";
            };
        
        var disqus_shortname = 'kamarada';
        
        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- Disqus End -->



    <!-- Google AdSense -->
    
        <!-- Google AdSense -->
<div class="row">
    <div class="col-xs-12">
        <ins class="adsbygoogle" id="content_ad_unit_2"
            data-ad-client="ca-pub-5193467168351289"
            data-ad-format="auto"
            data-ad-slot="4375857858"></ins>
    </div><!-- .col-xs-12 -->
</div><!-- .row -->
<!-- End Google AdSense -->

    

    <script type="text/javascript">
        adsbygoogle = window.adsbygoogle || [];

        $(document).ready(function(){
            
                var $ad = $('#content_ad_unit_2').closest('.row');
                var $posts = $('.blog-post');
                if (($posts.length > 1) || ($('.blog-archive-title').length > 0)) {
                    // Post listing
                    var post;
                    if ($posts.length > 2) {
                        post = random_number(2, $posts.length);
                    } else {
                        post = 2;
                    }
                    $posts.eq(post - 1).find('.blog-post-content .row').after($ad);
                } else {
                    // Page or post
                    var $paragraphs = $('.blog-post-content p').filter(function() {
                        return ($(this).closest('.no-ads-here').length == 0);
                    });
                    if ($paragraphs.length > 0) {
                        var paragraph;
                        if ($paragraphs.length > 1) {
                            paragraph = random_number(1, $paragraphs.length);
                        } else {
                            paragraph = 1;
                        }
                        $paragraphs.eq(paragraph - 1).after($ad);
                    } else {
                        $ad.remove();
                    }
                }
            
            $('.adsbygoogle').each(function(index, element){
                adsbygoogle.push({});
            });
        });
    </script>
    <!-- Google AdSense End -->



</body>
</html>
